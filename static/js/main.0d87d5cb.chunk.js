(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{237:function(e,t,n){},251:function(e,t){},253:function(e,t){},263:function(e,t){},265:function(e,t){},292:function(e,t){},294:function(e,t){},295:function(e,t){},300:function(e,t){},302:function(e,t){},321:function(e,t){},333:function(e,t){},336:function(e,t){},343:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n(41),i=n.n(c),o=n(44),s=(n(237),n(10)),l=n(60),u=n(3),j=n(35),b=n(420),d=n(416),f=n(399),p=n(419),h=n(421),x=n(426),O=n(423),m=n(425),v=n(422),g=n(206),w=n.n(g),E=n(209),_=n.n(E),F=n(210),D=n.n(F),y=n(412),S=n(405),k=n(427),C=n(1),I=240,M=Object(u.a)(p.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(l.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(I,"px)"),marginLeft:"".concat(I,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})})),L=Object(u.a)("div")((function(e){var t=e.theme;return Object(l.a)(Object(l.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})})),N=function(){var e=Object(j.a)(),t=a.useState(!1),n=Object(s.a)(t,2),r=n[0],c=n[1];return Object(C.jsxs)(b.a,{sx:{display:"flex"},children:[Object(C.jsx)(f.a,{}),Object(C.jsx)(M,{position:"fixed",open:r,children:Object(C.jsxs)(h.a,{children:[Object(C.jsx)(v.a,{color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)},edge:"start",sx:Object(l.a)({mr:2},r&&{display:"none"}),children:Object(C.jsx)(w.a,{})}),Object(C.jsx)(O.a,{variant:"h6",noWrap:!0,component:"div",children:Object(C.jsx)(o.b,{to:"/",style:{color:"#fff"},children:"Dropbox"})})]})}),Object(C.jsxs)(d.a,{sx:{width:I,flexShrink:0,"& .MuiDrawer-paper":{width:I,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:r,children:[Object(C.jsx)(L,{children:Object(C.jsx)(v.a,{onClick:function(){c(!1)},children:"ltr"===e.direction?Object(C.jsx)(_.a,{}):Object(C.jsx)(D.a,{})})}),Object(C.jsx)(m.a,{}),Object(C.jsx)(x.a,{children:["Home","Photos","Deleted Files"].map((function(e){return Object(C.jsx)(y.a,{disablePadding:!0,children:Object(C.jsx)(S.a,{children:Object(C.jsx)(k.a,{primary:e})})},e)}))}),Object(C.jsx)(m.a,{})]})]})},T=n(15),A=n.n(T),P=n(23),U=n(424),R=n(408),z=n(403),B=n(407),H=n(418),J=n(12),V=n(148);!function(e){e.LOAD_FILES="Unable to load Files",e.DELETE_FILES="Unable to delete Files",e.CREATE_FOLDER="Unable to create Folder",e.UPLOAD_FILE="Unable to upload File"}(r||(r={}));var W=Object(a.createContext)({dropbox:new V.Dropbox,isModalActive:!1,errorMessage:"",isError:!1,files:[],setFiles:function(){},setIsModalActive:function(){},setIsError:function(){},setErrorMessage:function(){},uploadFile:function(){}}),Y=function(e){var t=e.children,n=a.useState(!1),c=Object(s.a)(n,2),i=c[0],o=c[1],l=Object(a.useState)(""),u=Object(s.a)(l,2),j=u[0],b=u[1],d=Object(a.useState)(!1),f=Object(s.a)(d,2),p=f[0],h=f[1],x=Object(a.useState)([]),O=Object(s.a)(x,2),m=O[0],v=O[1],g=Object(J.j)().pathname,w=new V.Dropbox({accessToken:"sl.BiV6lKayR4ZEJ_0XWPlDrrr8RIo47gAYYM3UyC-Hc7RQj5zoE6XZUinSrSJPQLrFOrrf0JuY108rKp0nBBUROl_wS_I8y_EKCJlR232P6k5epuOzGVu4582d3RDViErtMyi5UCY"}),E=function(){var e=Object(P.a)(A.a.mark((function e(t){var n,a,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(n=t.target.files)||void 0===n?void 0:n[0]){e.next=3;break}return e.abrupt("return");case 3:return c="/"===g?"".concat(g).concat(a.name):"".concat(g,"/").concat(a.name),e.prev=4,e.next=7,w.filesUpload({path:c,contents:a,autorename:!0});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),b(r.UPLOAD_FILE),h(!0);case 13:window.location.reload();case 14:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),_={dropbox:w,errorMessage:j,isError:p,isModalActive:i,files:m,setFiles:v,setErrorMessage:b,setIsError:h,setIsModalActive:o,uploadFile:E};return Object(C.jsx)(W.Provider,{value:_,children:t})},Z=function(){var e=Object(a.useContext)(W);if(!e)throw new Error("useDropbox must be used within a DropboxContextValue");return e},q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:300,maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},K=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Z(),o=i.isModalActive,l=i.setIsModalActive,u=i.setErrorMessage,j=i.setIsError,d=i.dropbox,f=Object(J.j)().pathname,p=function(){var e=Object(P.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a="/"===f?"".concat(f).concat(n):"".concat(f,"/").concat(n),e.prev=2,e.next=5,d.filesCreateFolderV2({path:a,autorename:!0});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),u(r.CREATE_FOLDER),j(!0);case 11:window.location.reload();case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{children:Object(C.jsx)(R.a,{className:"modal","aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:o,onClose:function(){return l(!1)},closeAfterTransition:!0,slots:{backdrop:U.a},slotProps:{backdrop:{timeout:500}},children:Object(C.jsx)(z.a,{in:o,children:Object(C.jsxs)(b.a,{sx:q,children:[Object(C.jsx)(O.a,{sx:{marginBottom:"16px "},children:"Create Folder"}),Object(C.jsxs)("form",{className:"modal__form",onSubmit:p,children:[Object(C.jsx)(B.a,{id:"outlined-basic",label:"Folder Name",variant:"outlined",value:n,onChange:function(e){return c(e.target.value)}}),Object(C.jsx)(H.a,{type:"submit",variant:"contained",className:"modal__button",disabled:0===n.length,children:"Create"})]})]})})})})},G=n(21),Q=n(430),X=n(434),$=n(433),ee=n(429),te=n(431),ne=n(432),re=n(417),ae=n(409),ce=function(){return Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"32",viewBox:"0 -960 960 960",width:"32",children:Object(C.jsx)("path",{d:"M140-160q-24 0-42-18.5T80-220v-520q0-23 18-41.5t42-18.5h281l60 60h339q23 0 41.5 18.5T880-680v460q0 23-18.5 41.5T820-160H140Zm0-60h680v-460H456l-60-60H140v520Zm0 0v-520 520Z"})})},ie=n(428),oe=function(){return Object(C.jsx)("div",{className:"loader",children:Object(C.jsx)(b.a,{sx:{display:"flex"},children:Object(C.jsx)(ie.a,{})})})},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear(),a=e.getHours(),c=e.getMinutes(),i="".concat(t,"/").concat(n,"/").concat(r),o="".concat(a,":").concat(c.toString().padStart(2,"0")),s=a>=12?"pm":"am";return o+=" ".concat(s),"".concat(i," ").concat(o)},le=n(117),ue=function(){var e=Z().uploadFile;return Object(C.jsx)("div",{className:"uploader",children:Object(C.jsxs)("form",{className:"uploader__form",children:[Object(C.jsx)("label",{htmlFor:"uploader",className:"uploader__label",children:Object(C.jsx)(le.a,{color:"#1475cf",size:60})}),Object(C.jsx)("input",{id:"uploader",name:"uploader",type:"file",onChange:e,className:"uploader__input"})]})})},je=function(e){var t=e.filesToShow,n=e.isLoading,r=e.filesToDelete,c=e.onDelete,i=function(e){return"folder"===e},o=Object(J.j)().pathname,s=Object(J.l)();return Object(a.useEffect)((function(){c([])}),[o]),Object(C.jsx)(C.Fragment,{children:n?Object(C.jsx)(oe,{}):Object(C.jsx)(C.Fragment,{children:t.length?Object(C.jsx)(ee.a,{component:re.a,children:Object(C.jsxs)(Q.a,{sx:{minWidth:650},"aria-label":"caption table",children:[Object(C.jsx)(te.a,{children:Object(C.jsxs)(ne.a,{children:[Object(C.jsx)($.a,{align:"left",children:"Files"}),Object(C.jsx)($.a,{align:"right",children:"Modified"})]})}),Object(C.jsx)(X.a,{children:t.map((function(e){return Object(C.jsxs)(ne.a,{children:[Object(C.jsx)($.a,{component:"th",scope:"row",children:Object(C.jsxs)("div",{className:"files-table__cell-content",children:[Object(C.jsx)(ae.a,{onChange:function(){return function(e){if(r.includes(e)){var t=r.filter((function(t){return t!==e}));c(t)}else c([].concat(Object(G.a)(r),[e]))}(e.path_display)},inputProps:{"aria-label":"controlled"}}),Object(C.jsx)("div",{className:"files-table__cell-image",children:e.thumbnail?Object(C.jsx)("img",{src:(t=e.thumbnail,"data:image/jpeg;base64, ".concat(t)),alt:e.name}):Object(C.jsx)(ce,{})}),Object(C.jsx)("button",{className:"files-table__button",type:"button",onClick:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(e)&&s(t)}(e[".tag"],e.path_lower)},children:e.name})]})}),Object(C.jsx)($.a,{align:"right",children:e.client_modified&&se(new Date(e.client_modified))})]},e.id);var t}))})]})}):Object(C.jsx)(ue,{})})})},be=n(413),de=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(J.j)().pathname,i=Object(J.l)();Object(a.useEffect)((function(){var e=c.split("/").filter((function(e){return e}));r(e)}),[c]);var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t={color:"#736c64",pointerEvents:"auto"};return e!==n.length-1&&"/"!==c||(t.color="#000",t.pointerEvents="none"),t};return Object(C.jsx)("div",{role:"presentation",className:"breadcrumbs",children:Object(C.jsxs)(be.a,{"aria-label":"breadcrumb",children:[Object(C.jsx)(o.b,{to:"/",style:l(),children:"Dropbox"}),n.map((function(e,t){return Object(C.jsx)("button",{type:"button",className:"breadcrumbs__button",onClick:function(){return function(e){var t=n.findIndex((function(t){return t===e})),r=n.slice(0,t+1).join("/");i(r)}(e)},style:l(t),children:e},e)}))]})})},fe=n(410),pe=n(411),he=function(){var e=Z(),t=e.isError,n=e.setIsError,r=e.errorMessage;return Object(C.jsx)(pe.a,{open:t,onClose:function(){return n(!1)},autoHideDuration:6e3,children:Object(C.jsx)(fe.a,{severity:"error",children:r})})},xe=n(211),Oe=n.n(xe),me=function(e){var t=e.onDelete,n=e.hasFilesToDelete,r=Z(),a=r.setIsModalActive,c=r.uploadFile;return Object(C.jsxs)("div",{className:"toolbar",children:[Object(C.jsxs)(H.a,{variant:"contained",onClick:t,children:[Object(C.jsx)("label",{htmlFor:"file",className:"toolbar__label",children:"Upload"}),Object(C.jsx)("input",{id:"file",className:"toolbar__input-file",type:"file",onChange:c})]}),Object(C.jsxs)(H.a,{variant:"contained",onClick:function(){return a(!0)},children:[Object(C.jsx)(le.b,{size:20}),Object(C.jsx)(O.a,{sx:{fontSize:"0.875rem",marginLeft:"10px"},children:"Create Folder"})]}),n&&Object(C.jsx)(H.a,{variant:"outlined",onClick:t,startIcon:Object(C.jsx)(Oe.a,{}),children:"Delete"})]})},ve=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),o=Object(s.a)(i,2),u=o[0],j=o[1],b=Object(J.j)().pathname,d=void 0===b?"":b,f=n.length>0,p=Z(),h=p.setIsError,x=p.setErrorMessage,O=p.dropbox,m=p.files,v=p.setFiles,g=function(){var e=Object(P.a)(A.a.mark((function e(){var t,n,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,O.filesListFolder({path:"/"===d?"":d});case 4:return t=e.sent,n=t.result.entries,a=n.filter((function(e){return"file"===e[".tag"]})).map((function(e){return{path:e.path_lower,format:"jpeg",size:"w32h32"}})),e.next=9,O.filesGetThumbnailBatch({entries:a});case 9:e.sent.result.entries.forEach((function(e){if("metadata"in e){var t=n.findIndex((function(t){return e.metadata.path_lower===t.path_lower}));n[t]=Object(l.a)(Object(l.a)({},n[t]),{},{thumbnail:e.thumbnail})}})),v(n),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),x(r.LOAD_FILES),h(!0);case 18:return e.prev=18,j(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(P.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(n.map((function(e){return O.filesDeleteV2({path:e})})));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),x(r.DELETE_FILES),h(!0);case 9:c([]),g();case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){g()}),[d]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(de,{}),Object(C.jsx)(me,{hasFilesToDelete:f,onDelete:w}),Object(C.jsx)(je,{filesToShow:m,filesToDelete:n,onDelete:c,isLoading:u}),Object(C.jsx)(he,{})]})},ge=function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(N,{}),Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)(ve,{}),Object(C.jsx)(K,{})]})]})},we=function(e){var t=e.children;return Object(C.jsx)(Y,{children:t})};i.a.render(Object(C.jsx)(o.a,{children:Object(C.jsx)(we,{children:Object(C.jsx)(ge,{})})}),document.getElementById("root"))}},[[343,1,2]]]);
//# sourceMappingURL=main.0d87d5cb.chunk.js.map