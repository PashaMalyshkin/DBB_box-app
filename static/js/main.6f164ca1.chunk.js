(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{237:function(e,t,n){},251:function(e,t){},253:function(e,t){},263:function(e,t){},265:function(e,t){},292:function(e,t){},294:function(e,t){},295:function(e,t){},300:function(e,t){},302:function(e,t){},321:function(e,t){},333:function(e,t){},336:function(e,t){},343:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n(41),i=n.n(c),s=n(44),o=(n(237),n(10)),l=n(60),u=n(3),j=n(35),b=n(420),d=n(416),f=n(399),h=n(419),p=n(421),x=n(426),O=n(423),m=n(425),v=n(422),g=n(206),w=n.n(g),E=n(209),_=n.n(E),F=n(210),D=n.n(F),y=n(412),S=n(405),k=n(427),C=n(1),I=240,L=Object(u.a)(h.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(l.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(I,"px)"),marginLeft:"".concat(I,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})})),M=Object(u.a)("div")((function(e){var t=e.theme;return Object(l.a)(Object(l.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})})),N=function(){var e=Object(j.a)(),t=r.useState(!1),n=Object(o.a)(t,2),a=n[0],c=n[1];return Object(C.jsxs)(b.a,{sx:{display:"flex"},children:[Object(C.jsx)(f.a,{}),Object(C.jsx)(L,{position:"fixed",open:a,children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)(v.a,{color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)},edge:"start",sx:Object(l.a)({mr:2},a&&{display:"none"}),children:Object(C.jsx)(w.a,{})}),Object(C.jsx)(O.a,{variant:"h6",noWrap:!0,component:"div",children:Object(C.jsx)(s.b,{to:"/",style:{color:"#fff"},children:"Dropbox"})})]})}),Object(C.jsxs)(d.a,{sx:{width:I,flexShrink:0,"& .MuiDrawer-paper":{width:I,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:a,children:[Object(C.jsx)(M,{children:Object(C.jsx)(v.a,{onClick:function(){c(!1)},children:"ltr"===e.direction?Object(C.jsx)(_.a,{}):Object(C.jsx)(D.a,{})})}),Object(C.jsx)(m.a,{}),Object(C.jsx)(x.a,{children:["Home","Photos","Deleted Files"].map((function(e){return Object(C.jsx)(y.a,{disablePadding:!0,children:Object(C.jsx)(S.a,{children:Object(C.jsx)(k.a,{primary:e})})},e)}))}),Object(C.jsx)(m.a,{})]})]})},T=n(15),A=n.n(T),P=n(23),U=n(424),H=n(408),q=n(403),W=n(407),z=n(418),B=n(12),Y=n(148);!function(e){e.LOAD_FILES="Unable to load Files",e.DELETE_FILES="Unable to delete Files",e.CREATE_FOLDER="Unable to create Folder",e.UPLOAD_FILE="Unable to upload File"}(a||(a={}));var Z=Object(r.createContext)({dropbox:new Y.Dropbox,isModalActive:!1,errorMessage:"",isError:!1,files:[],setFiles:function(){},setIsModalActive:function(){},setIsError:function(){},setErrorMessage:function(){},uploadFile:function(){}}),G=function(e){var t=e.children,n=r.useState(!1),c=Object(o.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(""),u=Object(o.a)(l,2),j=u[0],b=u[1],d=Object(r.useState)(!1),f=Object(o.a)(d,2),h=f[0],p=f[1],x=Object(r.useState)([]),O=Object(o.a)(x,2),m=O[0],v=O[1],g=Object(B.j)().pathname,w=new Y.Dropbox({accessToken:"sl.BiWk84iKjm7t_HqUwhI8bfprAaYJ1gvXxjcS7yHsZc12mpGq4dYcn_4WvCxl3DxcvhLqC04OF02hsY-lf-1EmEcf9uSxryvYIsfvSekExwj_5GKZJm4uEKS1ynh8dWNnypKG130"}),E=function(){var e=Object(P.a)(A.a.mark((function e(t){var n,r,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.target.files)||void 0===n?void 0:n[0]){e.next=3;break}return e.abrupt("return");case 3:return c="/"===g?"".concat(g).concat(r.name):"".concat(g,"/").concat(r.name),e.prev=4,e.next=7,w.filesUpload({path:c,contents:r,autorename:!0});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),b(a.UPLOAD_FILE),p(!0);case 13:window.location.reload();case 14:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),_={dropbox:w,errorMessage:j,isError:h,isModalActive:i,files:m,setFiles:v,setErrorMessage:b,setIsError:p,setIsModalActive:s,uploadFile:E};return Object(C.jsx)(Z.Provider,{value:_,children:t})},J=function(){var e=Object(r.useContext)(Z);if(!e)throw new Error("useDropbox must be used within a DropboxContextValue");return e},K={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:300,maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},R=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],i=J(),s=i.isModalActive,l=i.setIsModalActive,u=i.setErrorMessage,j=i.setIsError,d=i.dropbox,f=Object(B.j)().pathname,h=function(){var e=Object(P.a)(A.a.mark((function e(t){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r="/"===f?"".concat(f).concat(n):"".concat(f,"/").concat(n),e.prev=2,e.next=5,d.filesCreateFolderV2({path:r,autorename:!0});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),u(a.CREATE_FOLDER),j(!0);case 11:window.location.reload();case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{children:Object(C.jsx)(H.a,{className:"modal","aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:s,onClose:function(){return l(!1)},closeAfterTransition:!0,slots:{backdrop:U.a},slotProps:{backdrop:{timeout:500}},children:Object(C.jsx)(q.a,{in:s,children:Object(C.jsxs)(b.a,{sx:K,children:[Object(C.jsx)(O.a,{sx:{marginBottom:"16px "},children:"Create Folder"}),Object(C.jsxs)("form",{className:"modal__form",onSubmit:h,children:[Object(C.jsx)(W.a,{id:"outlined-basic",label:"Folder Name",variant:"outlined",value:n,onChange:function(e){return c(e.target.value)}}),Object(C.jsx)(z.a,{type:"submit",variant:"contained",className:"modal__button",disabled:0===n.length,children:"Create"})]})]})})})})},V=n(21),X=n(430),Q=n(434),$=n(433),ee=n(429),te=n(431),ne=n(432),ae=n(417),re=n(409),ce=function(){return Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"32",viewBox:"0 -960 960 960",width:"32",children:Object(C.jsx)("path",{d:"M140-160q-24 0-42-18.5T80-220v-520q0-23 18-41.5t42-18.5h281l60 60h339q23 0 41.5 18.5T880-680v460q0 23-18.5 41.5T820-160H140Zm0-60h680v-460H456l-60-60H140v520Zm0 0v-520 520Z"})})},ie=n(428),se=function(){return Object(C.jsx)("div",{className:"loader",children:Object(C.jsx)(b.a,{sx:{display:"flex"},children:Object(C.jsx)(ie.a,{})})})},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear(),r=e.getHours(),c=e.getMinutes(),i="".concat(t,"/").concat(n,"/").concat(a),s="".concat(r,":").concat(c.toString().padStart(2,"0")),o=r>=12?"pm":"am";return s+=" ".concat(o),"".concat(i," ").concat(s)},le=n(117),ue=function(){var e=J().uploadFile;return Object(C.jsx)("div",{className:"uploader",children:Object(C.jsxs)("form",{className:"uploader__form",children:[Object(C.jsx)("label",{htmlFor:"uploader",className:"uploader__label",children:Object(C.jsx)(le.a,{color:"#1475cf",size:60})}),Object(C.jsx)("input",{id:"uploader",name:"uploader",type:"file",onChange:e,className:"uploader__input"})]})})},je=function(e){var t=e.filesToShow,n=e.isLoading,a=e.filesToDelete,c=e.onDelete,i=function(e){return"folder"===e},s=Object(B.j)().pathname,o=Object(B.l)();return Object(r.useEffect)((function(){c([])}),[s]),Object(C.jsx)(C.Fragment,{children:n?Object(C.jsx)(se,{}):Object(C.jsx)(C.Fragment,{children:t.length?Object(C.jsx)(ee.a,{component:ae.a,children:Object(C.jsxs)(X.a,{sx:{minWidth:650},"aria-label":"caption table",children:[Object(C.jsx)(te.a,{children:Object(C.jsxs)(ne.a,{children:[Object(C.jsx)($.a,{align:"left",children:"Files"}),Object(C.jsx)($.a,{align:"right",children:"Modified"})]})}),Object(C.jsx)(Q.a,{children:t.map((function(e){return Object(C.jsxs)(ne.a,{children:[Object(C.jsx)($.a,{component:"th",scope:"row",children:Object(C.jsxs)("div",{className:"files-table__cell-content",children:[Object(C.jsx)(re.a,{onChange:function(){return function(e){if(a.includes(e)){var t=a.filter((function(t){return t!==e}));c(t)}else c([].concat(Object(V.a)(a),[e]))}(e.path_display)},inputProps:{"aria-label":"controlled"}}),Object(C.jsx)("div",{className:"files-table__cell-image",children:e.thumbnail?Object(C.jsx)("img",{src:(t=e.thumbnail,"data:image/jpeg;base64, ".concat(t)),alt:e.name}):Object(C.jsx)(ce,{})}),Object(C.jsx)("button",{className:"files-table__button",type:"button",onClick:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(e)&&o(t)}(e[".tag"],e.path_lower)},children:e.name})]})}),Object(C.jsx)($.a,{align:"right",children:e.client_modified&&oe(new Date(e.client_modified))})]},e.id);var t}))})]})}):Object(C.jsx)(ue,{})})})},be=n(413),de=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(B.j)().pathname,i=Object(B.l)();Object(r.useEffect)((function(){var e=c.split("/").filter((function(e){return e}));a(e)}),[c]);var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t={color:"#736c64",pointerEvents:"auto"};return e!==n.length-1&&"/"!==c||(t.color="#000",t.pointerEvents="none"),t};return Object(C.jsx)("div",{role:"presentation",className:"breadcrumbs",children:Object(C.jsxs)(be.a,{"aria-label":"breadcrumb",children:[Object(C.jsx)(s.b,{to:"/",style:l(),children:"Dropbox"}),n.map((function(e,t){return Object(C.jsx)("button",{type:"button",className:"breadcrumbs__button",onClick:function(){return function(e){var t=n.findIndex((function(t){return t===e})),a=n.slice(0,t+1).join("/");i(a)}(e)},style:l(t),children:e},e)}))]})})},fe=n(410),he=n(411),pe=function(){var e=J(),t=e.isError,n=e.setIsError,a=e.errorMessage;return Object(C.jsx)(he.a,{open:t,onClose:function(){return n(!1)},autoHideDuration:6e3,children:Object(C.jsx)(fe.a,{severity:"error",children:a})})},xe=n(211),Oe=n.n(xe),me=function(e){var t=e.onDelete,n=e.hasFilesToDelete,a=J(),r=a.setIsModalActive,c=a.uploadFile;return Object(C.jsxs)("div",{className:"toolbar",children:[Object(C.jsxs)(z.a,{variant:"contained",onClick:t,children:[Object(C.jsx)("label",{htmlFor:"file",className:"toolbar__label",children:"Upload"}),Object(C.jsx)("input",{id:"file",className:"toolbar__input-file",type:"file",onChange:c})]}),Object(C.jsxs)(z.a,{variant:"contained",onClick:function(){return r(!0)},children:[Object(C.jsx)(le.b,{size:20}),Object(C.jsx)(O.a,{sx:{fontSize:"0.875rem",marginLeft:"10px"},children:"Create Folder"})]}),n&&Object(C.jsx)(z.a,{variant:"outlined",onClick:t,startIcon:Object(C.jsx)(Oe.a,{}),children:"Delete"})]})},ve=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(!1),s=Object(o.a)(i,2),u=s[0],j=s[1],b=Object(B.j)().pathname,d=void 0===b?"":b,f=n.length>0,h=J(),p=h.setIsError,x=h.setErrorMessage,O=h.dropbox,m=h.files,v=h.setFiles,g=function(){var e=Object(P.a)(A.a.mark((function e(){var t,n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,O.filesListFolder({path:"/"===d?"":d});case 4:return t=e.sent,n=t.result.entries,r=n.filter((function(e){return"file"===e[".tag"]})).map((function(e){return{path:e.path_lower,format:"jpeg",size:"w32h32"}})),e.next=9,O.filesGetThumbnailBatch({entries:r});case 9:e.sent.result.entries.forEach((function(e){if("metadata"in e){var t=n.findIndex((function(t){return e.metadata.path_lower===t.path_lower}));n[t]=Object(l.a)(Object(l.a)({},n[t]),{},{thumbnail:e.thumbnail})}})),v(n),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),x(a.LOAD_FILES),p(!0);case 18:return e.prev=18,j(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(P.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(n.map((function(e){return O.filesDeleteV2({path:e})})));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),x(a.DELETE_FILES),p(!0);case 9:c([]),g();case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g()}),[d]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(de,{}),Object(C.jsx)(me,{hasFilesToDelete:f,onDelete:w}),Object(C.jsx)(je,{filesToShow:m,filesToDelete:n,onDelete:c,isLoading:u}),Object(C.jsx)(pe,{})]})},ge=function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(N,{}),Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)(ve,{}),Object(C.jsx)(R,{})]})]})},we=function(e){var t=e.children;return Object(C.jsx)(G,{children:t})};i.a.render(Object(C.jsx)(s.a,{children:Object(C.jsx)(we,{children:Object(C.jsx)(ge,{})})}),document.getElementById("root"))}},[[343,1,2]]]);
//# sourceMappingURL=main.6f164ca1.chunk.js.map