(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{236:function(e,t,n){},250:function(e,t){},252:function(e,t){},262:function(e,t){},264:function(e,t){},291:function(e,t){},293:function(e,t){},294:function(e,t){},299:function(e,t){},301:function(e,t){},320:function(e,t){},332:function(e,t){},335:function(e,t){},342:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n(41),i=n.n(c),s=n(54),o=(n(236),n(12)),l=n(10),u=n(60),j=n(3),b=n(35),d=n(419),f=n(415),h=n(398),p=n(418),O=n(420),x=n(425),m=n(422),v=n(424),g=n(421),w=n(204),E=n.n(w),D=n(207),_=n.n(D),k=n(208),F=n.n(k),y=n(411),I=n(404),S=n(426),C=n(1),M=240,L=Object(j.a)(p.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(M,"px)"),marginLeft:"".concat(M,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})})),A=Object(j.a)("div")((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})})),T=function(){var e=Object(b.a)(),t=r.useState(!1),n=Object(l.a)(t,2),a=n[0],c=n[1];return Object(C.jsxs)(d.a,{sx:{display:"flex"},children:[Object(C.jsx)(h.a,{}),Object(C.jsx)(L,{position:"fixed",open:a,children:Object(C.jsxs)(O.a,{children:[Object(C.jsx)(g.a,{color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)},edge:"start",sx:Object(u.a)({mr:2},a&&{display:"none"}),children:Object(C.jsx)(E.a,{})}),Object(C.jsx)(m.a,{variant:"h6",noWrap:!0,component:"div",children:"Dropbox"})]})}),Object(C.jsxs)(f.a,{sx:{width:M,flexShrink:0,"& .MuiDrawer-paper":{width:M,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:a,children:[Object(C.jsx)(A,{children:Object(C.jsx)(g.a,{onClick:function(){c(!1)},children:"ltr"===e.direction?Object(C.jsx)(_.a,{}):Object(C.jsx)(F.a,{})})}),Object(C.jsx)(v.a,{}),Object(C.jsx)(x.a,{children:["Home","Photos","Deleted Files"].map((function(e){return Object(C.jsx)(y.a,{disablePadding:!0,children:Object(C.jsx)(I.a,{children:Object(C.jsx)(S.a,{primary:e})})},e)}))}),Object(C.jsx)(v.a,{})]})]})},N=n(15),P=n.n(N),H=n(24),U=n(423),B=n(407),W=n(402),R=n(406),V=n(417),z=Object(r.createContext)({isModalActive:!1,errorMessage:"",isError:!1,setIsModalActive:function(){},setIsError:function(){},setErrorMessage:function(){}}),q=function(e){var t=e.children,n=r.useState(!1),a=Object(l.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(""),o=Object(l.a)(s,2),u=o[0],j=o[1],b=Object(r.useState)(!1),d=Object(l.a)(b,2),f={isModalActive:c,setIsModalActive:i,errorMessage:u,isError:d[0],setErrorMessage:j,setIsError:d[1]};return Object(C.jsx)(z.Provider,{value:f,children:t})},J=function(){var e=Object(r.useContext)(z);if(!e)throw new Error("useDropbox must be used within a DropboxContextValue");return e},K=new(n(209).Dropbox)({accessToken:"sl.BiWZk2BKOFLJLjpuMESajJzWVyrs4Rxp51saBaAG6I8tbVyQ9katIceYsj265PhHWaOb905IdY6KCxN-3uAQlMKRP8OTIYo0EKkDn-vAMLzzC1EpSkf0HG7TV2e7QIA68mjawrM"});!function(e){e.LOAD_FILES="Unable to load Files",e.DELETE_FILES="Unable to delete Files",e.CREATE_FOLDER="Unable to create Folder",e.UPLOAD_FILE="Unable to upload File"}(a||(a={}));var Y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:300,maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Z=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],i=J(),s=i.isModalActive,u=i.setIsModalActive,j=i.setErrorMessage,b=i.setIsError,f=Object(o.l)().pathname,h=function(){var e=Object(H.a)(P.a.mark((function e(t){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r="/"===f?"".concat(f).concat(n):"".concat(f,"/").concat(n),e.prev=2,e.next=5,K.filesCreateFolderV2({path:r,autorename:!0});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),j(a.CREATE_FOLDER),b(!0);case 11:window.location.reload();case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{children:Object(C.jsx)(B.a,{className:"modal","aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:s,onClose:function(){return u(!1)},closeAfterTransition:!0,slots:{backdrop:U.a},slotProps:{backdrop:{timeout:500}},children:Object(C.jsx)(W.a,{in:s,children:Object(C.jsxs)(d.a,{sx:Y,children:[Object(C.jsx)(m.a,{sx:{marginBottom:"16px "},children:"Create Folder"}),Object(C.jsxs)("form",{className:"modal__form",onSubmit:h,children:[Object(C.jsx)(R.a,{id:"outlined-basic",label:"Folder Name",variant:"outlined",value:n,onChange:function(e){return c(e.target.value)}}),Object(C.jsx)(V.a,{type:"submit",variant:"contained",className:"modal__button",children:"Create"})]})]})})})})},G=n(21),Q=n(429),X=n(433),$=n(432),ee=n(428),te=n(430),ne=n(431),ae=n(416),re=n(408),ce=function(){return Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"32",viewBox:"0 -960 960 960",width:"32",children:Object(C.jsx)("path",{d:"M140-160q-24 0-42-18.5T80-220v-520q0-23 18-41.5t42-18.5h281l60 60h339q23 0 41.5 18.5T880-680v460q0 23-18.5 41.5T820-160H140Zm0-60h680v-460H456l-60-60H140v520Zm0 0v-520 520Z"})})},ie=n(427),se=function(){return Object(C.jsx)(d.a,{sx:{display:"flex"},children:Object(C.jsx)(ie.a,{})})},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear(),r=e.getHours(),c=e.getMinutes(),i="".concat(t,"/").concat(n,"/").concat(a),s="".concat(r,":").concat(c.toString().padStart(2,"0")),o=r>=12?"pm":"am";return s+=" ".concat(o),"".concat(i," ").concat(s)},le=function(e){var t=e.filesToShow,n=e.isLoading,a=e.filesToDelete,c=e.onDelete,i=function(e){return"folder"===e},s=Object(o.l)().pathname,l=Object(o.n)();return Object(r.useEffect)((function(){c([])}),[s]),Object(C.jsx)("div",{className:"files-table",children:n?Object(C.jsx)(se,{}):Object(C.jsx)(ee.a,{component:ae.a,children:Object(C.jsxs)(Q.a,{sx:{minWidth:650},"aria-label":"caption table",children:[Object(C.jsx)(te.a,{children:Object(C.jsxs)(ne.a,{children:[Object(C.jsx)($.a,{align:"left",children:"Files"}),Object(C.jsx)($.a,{align:"right",children:"Modified"})]})}),Object(C.jsx)(X.a,{children:t.map((function(e){return Object(C.jsxs)(ne.a,{children:[Object(C.jsx)($.a,{component:"th",scope:"row",children:Object(C.jsxs)("div",{className:"files-table__cell-content",children:[Object(C.jsx)(re.a,{onChange:function(){return function(e){if(a.includes(e)){var t=a.filter((function(t){return t!==e}));c(t)}else c([].concat(Object(G.a)(a),[e]))}(e.path_display)},inputProps:{"aria-label":"controlled"}}),Object(C.jsx)("div",{className:"files-table__cell-image",children:e.thumbnail?Object(C.jsx)("img",{src:(t=e.thumbnail,"data:image/jpeg;base64, ".concat(t)),alt:e.name}):Object(C.jsx)(ce,{})}),Object(C.jsx)("button",{className:"files-table__button",type:"button",onClick:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(e)&&l(t)}(e[".tag"],e.path_lower)},children:e.name})]})}),Object(C.jsx)($.a,{align:"right",children:e.client_modified&&oe(new Date(e.client_modified))})]},e.id);var t}))})]})})})},ue=n(412),je=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(o.l)().pathname,i=Object(o.n)();Object(r.useEffect)((function(){var e=c.split("/").filter((function(e){return e}));a(e)}),[c]);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t={color:"#736c64",pointerEvents:"auto"};return e!==n.length-1&&"/"!==c||(t.color="#000",t.pointerEvents="none"),t};return Object(C.jsx)("div",{role:"presentation",className:"breadcrumbs",children:Object(C.jsxs)(ue.a,{"aria-label":"breadcrumb",children:[Object(C.jsx)(s.b,{to:"/",style:u(),children:"Dropbox"}),n.map((function(e,t){return Object(C.jsx)("button",{type:"button",className:"breadcrumbs__button",onClick:function(){return function(e){var t=n.findIndex((function(t){return t===e})),a=n.slice(0,t+1).join("/");i(a)}(e)},style:u(t),children:e},e)}))]})})},be=n(409),de=n(410),fe=function(){var e=J(),t=e.isError,n=e.setIsError,a=e.errorMessage;return Object(C.jsx)(de.a,{open:t,onClose:function(){return n(!1)},autoHideDuration:6e3,children:Object(C.jsx)(be.a,{severity:"error",children:a})})},he=n(210),pe=n.n(he),Oe=function(e){var t=e.onDelete,n=e.hasFilesToDelete,a=e.onAdd,r=J().setIsModalActive;return Object(C.jsxs)("div",{className:"toolbar",children:[Object(C.jsxs)(V.a,{variant:"contained",onClick:t,children:[Object(C.jsx)("label",{htmlFor:"file",className:"toolbar__label",children:"Upload"}),Object(C.jsx)("input",{id:"file",className:"toolbar__input-file",type:"file",onChange:a})]}),Object(C.jsx)(V.a,{variant:"contained",onClick:function(){return r(!0)},children:"Create Folder"}),n&&Object(C.jsx)(V.a,{variant:"outlined",onClick:t,startIcon:Object(C.jsx)(pe.a,{}),children:"Delete"})]})},xe=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)([]),s=Object(l.a)(i,2),j=s[0],b=s[1],d=Object(r.useState)(!1),f=Object(l.a)(d,2),h=f[0],p=f[1],O=J(),x=O.setIsError,m=O.setErrorMessage,v=Object(o.l)().pathname,g=void 0===v?"":v,w=j.length>0,E=function(){var e=Object(H.a)(P.a.mark((function e(){var t,n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,K.filesListFolder({path:"/"===g?"":g});case 4:return t=e.sent,n=t.result.entries,r=n.filter((function(e){return"file"===e[".tag"]})).map((function(e){return{path:e.path_lower,format:"jpeg",size:"w32h32"}})),e.next=9,K.filesGetThumbnailBatch({entries:r});case 9:e.sent.result.entries.forEach((function(e){if("metadata"in e){var t=n.findIndex((function(t){return e.metadata.path_lower===t.path_lower}));n[t]=Object(u.a)(Object(u.a)({},n[t]),{},{thumbnail:e.thumbnail})}})),c(n),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),m(a.LOAD_FILES),x(!0);case 18:return e.prev=18,p(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(H.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(j.map((function(e){return K.filesDeleteV2({path:e})})));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),m(a.DELETE_FILES),x(!0);case 9:b([]),E();case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(H.a)(P.a.mark((function e(t){var n,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.target.files)||void 0===n?void 0:n[0]){e.next=3;break}return e.abrupt("return");case 3:return c="/"===g?"".concat(g).concat(r.name):"".concat(g,"/").concat(r.name),e.prev=4,e.next=7,K.filesUpload({path:c,contents:r,autorename:!0});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),m(a.UPLOAD_FILE),x(!0);case 13:window.location.reload();case 14:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){E()}),[g]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(je,{}),Object(C.jsx)(Oe,{hasFilesToDelete:w,onDelete:D,onAdd:_}),Object(C.jsx)(le,{filesToShow:n,filesToDelete:j,onDelete:b,isLoading:h}),Object(C.jsx)(fe,{})]})},me=function(){return Object(C.jsx)(C.Fragment,{})},ve=function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(T,{}),Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)(xe,{}),Object(C.jsx)(o.c,{children:Object(C.jsx)(o.a,{path:"/photos",element:Object(C.jsx)(me,{})})}),Object(C.jsx)(Z,{})]})]})},ge=function(e){var t=e.children;return Object(C.jsx)(q,{children:t})};i.a.render(Object(C.jsx)(s.a,{children:Object(C.jsx)(ge,{children:Object(C.jsx)(ve,{})})}),document.getElementById("root"))}},[[342,1,2]]]);
//# sourceMappingURL=main.532d6703.chunk.js.map