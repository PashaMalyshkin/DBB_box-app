(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{236:function(e,t,n){},250:function(e,t){},252:function(e,t){},262:function(e,t){},264:function(e,t){},291:function(e,t){},293:function(e,t){},294:function(e,t){},299:function(e,t){},301:function(e,t){},320:function(e,t){},332:function(e,t){},335:function(e,t){},342:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n(41),i=n.n(r),o=n(63),s=(n(236),n(12)),l=n(10),u=n(59),j=n(3),b=n(35),d=n(421),h=n(416),f=n(399),x=n(420),O=n(422),p=n(427),m=n(424),v=n(426),g=n(423),w=n(204),k=n.n(w),_=n(207),D=n.n(_),y=n(208),S=n.n(y),F=n(412),C=n(405),E=n(428),M=n(1),T=240,I=Object(j.a)(x.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(T,"px)"),marginLeft:"".concat(T,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})})),L=Object(j.a)("div")((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})})),N=function(){var e=Object(b.a)(),t=c.useState(!1),n=Object(l.a)(t,2),a=n[0],r=n[1];return Object(M.jsxs)(d.a,{sx:{display:"flex"},children:[Object(M.jsx)(f.a,{}),Object(M.jsx)(I,{position:"fixed",open:a,children:Object(M.jsxs)(O.a,{children:[Object(M.jsx)(g.a,{color:"inherit","aria-label":"open drawer",onClick:function(){r(!0)},edge:"start",sx:Object(u.a)({mr:2},a&&{display:"none"}),children:Object(M.jsx)(k.a,{})}),Object(M.jsx)(m.a,{variant:"h6",noWrap:!0,component:"div",children:"Dropbox"})]})}),Object(M.jsxs)(h.a,{sx:{width:T,flexShrink:0,"& .MuiDrawer-paper":{width:T,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:a,children:[Object(M.jsx)(L,{children:Object(M.jsx)(g.a,{onClick:function(){r(!1)},children:"ltr"===e.direction?Object(M.jsx)(D.a,{}):Object(M.jsx)(S.a,{})})}),Object(M.jsx)(v.a,{}),Object(M.jsx)(p.a,{children:["Home","Photos","Deleted Files"].map((function(e){return Object(M.jsx)(F.a,{disablePadding:!0,children:Object(M.jsx)(C.a,{children:Object(M.jsx)(E.a,{primary:e})})},e)}))}),Object(M.jsx)(v.a,{})]})]})},A=n(15),P=n.n(A),B=n(24),z=n(425),H=n(408),W=n(403),J=n(407),U=n(418),q=Object(c.createContext)({isModalActive:!1,setIsModalActive:function(){}}),K=function(e){var t=e.children,n=c.useState(!1),a=Object(l.a)(n,2),r={isModalActive:a[0],setIsModalActive:a[1]};return Object(M.jsx)(q.Provider,{value:r,children:t})},V=function(){var e=Object(c.useContext)(q);if(!e)throw new Error("useDropbox must be used within a DropboxContextValue");return e},Z=new(n(209).Dropbox)({accessToken:"sl.BiRrZmI96JkT_kMooYFleodotLMdsO7MKUXPbs5kwvvjWvi4OzDQnBzM6QnEm9PwkT4PablszrB9gGfy3nygW3l1JiKExkTk91ejJthB4zSO3VznbePaLGFlsoMcxfD2K6nvAK0"}),G={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:300,maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Q=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],r=V(),i=r.isModalActive,o=r.setIsModalActive,u=Object(s.l)().pathname,j=function(){var e=Object(B.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/"===u?"".concat(u).concat(n):"".concat(u,"/").concat(n),e.next=3,Z.filesCreateFolderV2({path:t,autorename:!0});case 3:window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(M.jsx)("div",{children:Object(M.jsx)(H.a,{className:"modal","aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:i,onClose:function(){return o(!1)},closeAfterTransition:!0,slots:{backdrop:z.a},slotProps:{backdrop:{timeout:500}},children:Object(M.jsx)(W.a,{in:i,children:Object(M.jsxs)(d.a,{sx:G,children:[Object(M.jsx)(m.a,{sx:{marginBottom:"16px "},children:"Create Folder"}),Object(M.jsxs)("form",{className:"modal__form",onSubmit:j,children:[Object(M.jsx)(J.a,{id:"outlined-basic",label:"Folder Name",variant:"outlined",value:n,onChange:function(e){return a(e.target.value)}}),Object(M.jsx)(U.a,{type:"submit",variant:"contained",className:"modal__button",children:"Create"})]})]})})})})},Y=n(20),R=n(431),X=n(435),$=n(434),ee=n(430),te=n(432),ne=n(433),ae=n(417),ce=n(409),re=function(){return Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"32",viewBox:"0 -960 960 960",width:"32",children:Object(M.jsx)("path",{d:"M140-160q-24 0-42-18.5T80-220v-520q0-23 18-41.5t42-18.5h281l60 60h339q23 0 41.5 18.5T880-680v460q0 23-18.5 41.5T820-160H140Zm0-60h680v-460H456l-60-60H140v520Zm0 0v-520 520Z"})})},ie=n(429),oe=function(){return Object(M.jsx)(d.a,{sx:{display:"flex"},children:Object(M.jsx)(ie.a,{})})},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear(),c=e.getHours(),r=e.getMinutes(),i="".concat(t,"/").concat(n,"/").concat(a),o="".concat(c,":").concat(r.toString().padStart(2,"0")),s=c>=12?"pm":"am";return o+=" ".concat(s),"".concat(i," ").concat(o)},le=function(e){var t=e.filesToShow,n=e.isLoading,a=e.filesToDelete,c=e.onDelete,r=function(e){return"folder"===e},i=Object(s.n)();return Object(M.jsx)("div",{className:"files-table",children:n?Object(M.jsx)(oe,{}):Object(M.jsx)(ee.a,{component:ae.a,children:Object(M.jsxs)(R.a,{sx:{minWidth:650},"aria-label":"caption table",children:[Object(M.jsx)(te.a,{children:Object(M.jsxs)(ne.a,{children:[Object(M.jsx)($.a,{align:"left",children:"Files"}),Object(M.jsx)($.a,{align:"right",children:"Modified"})]})}),Object(M.jsx)(X.a,{children:t.map((function(e){return Object(M.jsxs)(ne.a,{children:[Object(M.jsx)($.a,{component:"th",scope:"row",children:Object(M.jsxs)("div",{className:"files-table__cell-content",children:[Object(M.jsx)(ce.a,{onChange:function(){return function(e){if(a.includes(e)){var t=a.filter((function(t){return t!==e}));c(t)}else c([].concat(Object(Y.a)(a),[e]))}(e.path_display)},inputProps:{"aria-label":"controlled"}}),Object(M.jsx)("div",{className:"files-table__cell-image",children:e.thumbnail?Object(M.jsx)("img",{src:(t=e.thumbnail,"data:image/jpeg;base64, ".concat(t)),alt:e.name}):Object(M.jsx)(re,{})}),Object(M.jsx)("button",{className:"files-table__button",type:"button",onClick:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r(e)&&i(t)}(e[".tag"],e.path_lower)},children:e.name})]})}),Object(M.jsx)($.a,{align:"right",children:e.client_modified&&se(new Date(e.client_modified))})]},e.id);var t}))})]})})})},ue=n(413),je=n(419),be=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(s.l)().pathname,i=Object(s.n)();Object(c.useEffect)((function(){var e=r.split("/").filter((function(e){return e}));a(e)}),[r]);var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t={color:"#736c64",pointerEvents:"auto"};return e!==n.length-1&&"/"!==r||(t.color="#000",t.pointerEvents="none"),t};return Object(M.jsx)("div",{role:"presentation",className:"breadcrumbs",children:Object(M.jsxs)(ue.a,{"aria-label":"breadcrumb",children:[Object(M.jsx)(je.a,{href:"/",underline:"none",color:"inherit",style:o(),children:"Dropbox"}),n.map((function(e,t){return Object(M.jsx)("button",{type:"button",className:"breadcrumbs__button",onClick:function(){return function(e){var t=n.findIndex((function(t){return t===e})),a=n.slice(0,t+1).join("/");i(a)}(e)},style:o(t),children:e},e)}))]})})};!function(e){e.LOAD_FILES="Unable to load Files",e.DELETE_FILES="Unable to delete Files"}(a||(a={}));var de=n(410),he=n(411),fe=function(e){var t=e.text,n=e.isOpen,a=e.handleClose;return Object(M.jsx)(he.a,{open:n,onClose:a,autoHideDuration:6e3,children:Object(M.jsx)(de.a,{severity:"error",children:t})})},xe=n(210),Oe=n.n(xe),pe=function(e){var t=e.onDelete,n=e.hasFilesToDelete,a=e.onAdd,c=V().setIsModalActive;return Object(M.jsxs)("div",{className:"toolbar",children:[Object(M.jsxs)(U.a,{variant:"contained",onClick:t,children:[Object(M.jsx)("label",{htmlFor:"file",className:"toolbar__label",children:"Upload"}),Object(M.jsx)("input",{id:"file",className:"toolbar__input-file",type:"file",onChange:a})]}),Object(M.jsx)(U.a,{variant:"contained",onClick:function(){return c(!0)},children:"Create Folder"}),n&&Object(M.jsx)(U.a,{variant:"outlined",onClick:t,startIcon:Object(M.jsx)(Oe.a,{}),children:"Delete"})]})},me=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)([]),o=Object(l.a)(i,2),j=o[0],b=o[1],d=Object(c.useState)(!1),h=Object(l.a)(d,2),f=h[0],x=h[1],O=Object(c.useState)(""),p=Object(l.a)(O,2),m=p[0],v=p[1],g=Object(c.useState)(!1),w=Object(l.a)(g,2),k=w[0],_=w[1],D=Object(s.l)().pathname,y=void 0===D?"":D,S=j.length>0,F=function(){var e=Object(B.a)(P.a.mark((function e(){var t,n,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,Z.filesListFolder({path:"/"===y?"":y});case 4:return t=e.sent,n=t.result.entries,c=n.filter((function(e){return"file"===e[".tag"]})).map((function(e){return{path:e.path_lower,format:"jpeg",size:"w32h32"}})),e.next=9,Z.filesGetThumbnailBatch({entries:c});case 9:e.sent.result.entries.forEach((function(e){if("metadata"in e){var t=n.findIndex((function(t){return e.metadata.path_lower===t.path_lower}));n[t]=Object(u.a)(Object(u.a)({},n[t]),{},{thumbnail:e.thumbnail})}})),r(n),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),v(a.LOAD_FILES),_(!0);case 18:return e.prev=18,x(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(B.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(j.map((function(e){return Z.filesDeleteV2({path:e})})));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),v(a.DELETE_FILES),_(!0);case 9:F();case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(B.a)(P.a.mark((function e(t){var n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(n=t.target.files)||void 0===n?void 0:n[0]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Z.filesUpload({path:"".concat(y,"/").concat(a.name),contents:a,autorename:!0});case 5:F();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){F()}),[y]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(be,{}),Object(M.jsx)(pe,{hasFilesToDelete:S,onDelete:C,onAdd:E}),Object(M.jsx)(le,{filesToShow:n,filesToDelete:j,onDelete:b,isLoading:f}),Object(M.jsx)(fe,{isOpen:k,handleClose:function(){return _(!1)},text:m})]})},ve=function(){return Object(M.jsx)(M.Fragment,{})},ge=function(){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(N,{}),Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(me,{}),Object(M.jsx)(s.c,{children:Object(M.jsx)(s.a,{path:"/photos",element:Object(M.jsx)(ve,{})})}),Object(M.jsx)(Q,{})]})]})},we=function(e){var t=e.children;return Object(M.jsx)(K,{children:t})};i.a.render(Object(M.jsx)(o.a,{children:Object(M.jsx)(we,{children:Object(M.jsx)(ge,{})})}),document.getElementById("root"))}},[[342,1,2]]]);
//# sourceMappingURL=main.4d27769a.chunk.js.map